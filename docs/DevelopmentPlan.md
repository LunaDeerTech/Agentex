# Agentex 开发计划（AI 开发模式）

## 文档信息

| 项目 | 内容 |
|------|------|
| 产品名称 | Agentex |
| 版本 | 1.0.0 |
| 文档版本 | 1.1 |
| 更新日期 | 2026-02-03 |
| 开发模式 | AI 辅助开发 |

---

## 1. 项目概述

### 1.1 项目目标

开发一个功能完整的 Web AI Agent 平台，包含 MCP 能力、规则引擎、模型管理、SKILL 管理、RAG 知识库、多 Agent 架构支持和多用户系统。

### 1.2 AI 开发模式说明

本项目采用 **AI 辅助开发**模式，由人类开发者与 AI 协作完成：

| 角色 | 职责 |
|------|------|
| 人类开发者 | 需求定义、架构决策、代码审查、测试验证、部署运维 |
| AI 助手 | 代码生成、文档编写、问题诊断、重构建议、测试用例生成 |

**开发流程：**
```
1. 人类定义任务目标和验收标准
2. 人类提供 Prompt 和上下文文档
3. AI 生成代码/文档
4. 人类审查、测试、反馈
5. AI 根据反馈迭代修改
6. 人类验收并提交
```

**注意事项：**
- 每个任务需提供完整上下文（相关文档、已有代码）
- 任务拆分为原子化单元，每个任务有明确边界
- 先生成核心功能，再迭代完善
- 商业级代码需人类仔细审查

### 1.3 项目范围

| 模块 | 优先级 | 说明 |
|------|--------|------|
| 用户系统 | P0 | 基础功能，其他模块依赖 |
| 会话管理 | P0 | 核心对话功能 |
| Agent 服务 | P0 | 核心 Agent 能力 |
| 模型管理 | P0 | LLM 连接和管理 |
| MCP 能力 | P1 | 工具扩展能力 |
| SKILL 管理 | P1 | 技能定义和执行 |
| RAG 知识库 | P1 | 知识检索增强 |
| 规则引擎 | P2 | 自动化任务 |
| 权限管理 | P2 | 细粒度权限控制 |

### 1.4 技术栈确认

| 层次 | 技术 | 确认状态 |
|------|------|---------- |
| 前端框架 | Vue 3 + TypeScript | ✅ |
| 前端构建 | Vite | ✅ |
| 前端 UI | shadcn-vue + Inspira UI | ✅ |
| UI 风格 | Linear 极简风（深色主题） | ✅ |
| 图标库 | Lucide Vue Next | ✅ |
| 后端框架 | FastAPI | ✅ |
| 数据库 | PostgreSQL | ✅ |
| 缓存 | Redis | ✅ |
| 向量数据库 | Milvus | ✅ |
| 任务队列 | Celery | ✅ |
| Agent 通信 | AG-UI (SSE) | ✅ |

### 1.5 AI 开发工具

| 工具 | 用途 |
|------|------|
| GitHub Copilot / Cursor | 代码生成与编辑 |
| Claude / GPT-4 | 架构设计、文档编写、复杂问题分析 |
| AI Prompt 文档 | 标准化开发指引（见 AIPrompts.md）|

---

## 2. 开发阶段划分

### 2.1 阶段总览

```
┌─────────────────────────────────────────────────────────────────────────────────┐
│                              开发阶段时间线                                      │
├─────────────────────────────────────────────────────────────────────────────────┤
│                                                                                  │
│  阶段一：基础框架        阶段二：核心功能        阶段三：扩展功能                  │
│  (4周)                  (6周)                  (4周)                            │
│                                                                                  │
│  ├──────────────────────┼──────────────────────┼──────────────────────┤        │
│  │                      │                      │                      │        │
│  │  项目初始化          │  Agent 对话服务      │  规则引擎            │        │
│  │  用户认证            │  MCP 客户端          │  权限细化            │        │
│  │  基础框架            │  SKILL 管理          │  性能优化            │        │
│  │  数据库设计          │  RAG 知识库          │  测试完善            │        │
│  │                      │  前端核心页面        │  文档完善            │        │
│  │                      │                      │                      │        │
│  └──────────────────────┴──────────────────────┴──────────────────────┘        │
│                                                                                  │
│  阶段四：测试与优化      阶段五：部署上线                                         │
│  (2周)                  (1周)                                                   │
│                                                                                  │
│  ├──────────────────────┼──────────────────────┤                               │
│  │                      │                      │                               │
│  │  集成测试            │  生产环境部署        │                               │
│  │  性能测试            │  监控配置            │                               │
│  │  安全测试            │  文档发布            │                               │
│  │  Bug 修复            │                      │                               │
│  │                      │                      │                               │
│  └──────────────────────┴──────────────────────┘                               │
│                                                                                  │
│  总计：约 17 周（4个月）                                                         │
│                                                                                  │
└─────────────────────────────────────────────────────────────────────────────────┘
```

---

## 3. 阶段一：基础框架（第1-4周）

### 3.1 目标

搭建前后端基础框架，完成用户认证系统，为后续开发奠定基础。

### 3.2 任务分解

> 💡 **Prompt 指引**：每个任务的详细 Prompt 请参考 [AIPrompts.md](./AIPrompts.md)

#### 第1周：项目初始化

| 任务ID | 任务 | 类型 | 优先级 | 验收标准 |
|--------|------|------|--------|----------|
| 1.1 | 创建 Git 仓库和分支策略 | 人工 | P0 | 仓库可克隆，分支策略文档完成 |
| 1.2 | 后端项目初始化（FastAPI） | AI | P0 | 项目可启动，访问 /docs 显示 Swagger |
| 1.3 | 前端项目初始化（Vue 3 + Vite） | AI | P0 | 项目可启动，首页可访问 |
| 1.4 | DevContainer 开发环境配置 | AI | P0 | VS Code "Reopen in Container" 可启动完整开发环境 |
| 1.5 | PostgreSQL 数据库初始化 | AI | P0 | 数据库可连接，迁移脚本可执行 |
| 1.6 | Redis 配置 | AI | P1 | Redis 可连接，基础缓存可用 |
| 1.7 | CI/CD 基础配置 | AI | P1 | GitHub Actions 可运行基础测试 |

#### 第2周：用户认证系统

| 任务ID | 任务 | 类型 | 优先级 | 验收标准 |
|--------|------|------|--------|----------|
| 2.1 | 用户/角色/权限表设计 | AI | P0 | 表结构符合设计文档，迁移可执行 |
| 2.2 | 用户注册/登录 API | AI | P0 | API 可调用，返回 JWT Token |
| 2.3 | JWT Token 认证中间件 | AI | P0 | 保护路由需要有效 Token |
| 2.4 | 登录/注册页面 | AI | P0 | 页面可访问，表单验证正常 |
| 2.5 | 前端认证状态管理 | AI | P0 | Pinia Store 可保存用户状态 |
| 2.6 | 路由守卫实现 | AI | P0 | 未登录跳转登录页 |
| 2.7 | API 请求封装（Axios） | AI | P0 | Token 自动添加，错误统一处理 |

#### 第3周：基础框架完善

| 任务ID | 任务 | 类型 | 优先级 | 验收标准 |
|--------|------|------|--------|----------|
| 3.1 | 用户信息 API | AI | P0 | 可获取/更新用户信息 |
| 3.2 | API 密钥管理 | AI | P1 | 可创建/删除 API Key |
| 3.3 | 全局异常处理 | AI | P0 | 统一错误响应格式 |
| 3.4 | 日志系统配置 | AI | P1 | 结构化日志输出 |
| 3.5 | 主布局组件 | AI | P0 | 左侧边栏 + 内容区布局 |
| 3.6 | 设置页布局 | AI | P0 | 设置菜单 + 内容区布局 |
| 3.7 | 个人信息页面 | AI | P1 | 可查看/编辑个人信息 |

#### 第4周：会话基础

| 任务ID | 任务 | 类型 | 优先级 | 验收标准 |
|--------|------|------|--------|----------|
| 4.1 | 会话/消息表设计 | AI | P0 | 表结构符合设计文档 |
| 4.2 | 会话 CRUD API | AI | P0 | 可创建/查询/删除会话 |
| 4.3 | 消息 API | AI | P0 | 可添加/查询消息 |
| 4.4 | 对话页面基础结构 | AI | P0 | 页面布局完成 |
| 4.5 | 会话列表组件 | AI | P0 | 可切换会话，可新建/删除 |
| 4.6 | 消息列表组件 | AI | P0 | 可展示消息历史 |

### 3.3 里程碑

| 里程碑 | 完成标准 | 预计日期 |
|--------|---------|---------|
| M1: 开发环境就绪 | Docker 环境可运行 | 第1周末 |
| M2: 用户认证完成 | 可注册、登录、鉴权 | 第2周末 |
| M3: 基础框架完成 | 主布局、设置页可用 | 第3周末 |
| M4: 会话基础完成 | 可创建会话、发送消息 | 第4周末 |

---

## 4. 阶段二：核心功能（第5-10周）

### 4.1 目标

实现 Agent 核心能力，包括 LLM 对接、Agent 架构、MCP 客户端、SKILL 管理、RAG 知识库。

### 4.2 任务分解

#### 第5周：模型管理

| 任务ID | 任务 | 类型 | 优先级 | 验收标准 |
|--------|------|------|--------|----------|
| 5.1 | 模型配置表设计 | AI | P0 | 表结构符合设计文档 |
| 5.2 | 模型管理 API | AI | P0 | CRUD 操作完整 |
| 5.3 | OpenAI 客户端实现 | AI | P0 | 可调用 GPT 模型 |
| 5.4 | Anthropic 客户端实现 | AI | P0 | 可调用 Claude 模型 |
| 5.5 | 模型管理页面 | AI | P0 | 可添加/编辑/删除模型配置 |
| 5.6 | 模型选择器组件 | AI | P1 | 下拉选择可用模型 |

#### 第6周：Agent 服务基础

| 任务ID | 任务 | 类型 | 优先级 | 验收标准 |
|--------|------|------|--------|----------|
| 6.1 | Agent 基类设计 | AI | P0 | 抽象类定义完整，接口清晰 |
| 6.2 | ReAct Agent 实现 | AI | P0 | 可多轮对话，支持工具调用 |
| 6.3 | Agent 工厂实现 | AI | P0 | 可根据类型创建 Agent |
| 6.4 | AG-UI 端点实现 | AI | P0 | SSE 流式输出正常 |
| 6.5 | AG-UI 客户端封装 | AI | P0 | useAgentChat 可连接服务 |
| 6.6 | 消息流式展示 | AI | P0 | 逐字流式输出稳定 |

#### 第7周：Agent 服务完善

| 任务ID | 任务 | 类型 | 优先级 | 验收标准 |
|--------|------|------|--------|----------|
| 7.1 | AgenticRAG Agent 实现 | AI | P0 | 可检索知识库并回答 |
| 7.2 | PlanAndExecute Agent 实现 | AI | P1 | 可拆解任务并执行 |
| 7.3 | 思考过程展示组件 | AI | P0 | 可展示 Agent 思考过程 |
| 7.4 | 工具调用展示组件 | AI | P0 | 可展示工具调用和结果 |
| 7.5 | Agent 选择器组件 | AI | P1 | 可切换 Agent 类型 |
| 7.6 | 对话输入组件完善 | AI | P0 | 支持停止生成、重新生成 |

#### 第8周：MCP 客户端

| 任务ID | 任务 | 类型 | 优先级 | 验收标准 |
|--------|------|------|--------|----------|
| 8.1 | MCP 连接表设计 | AI | P0 | 表结构符合设计文档 |
| 8.2 | 标准 MCP 客户端实现 | AI | P0 | 可连接 stdio/sse MCP |
| 8.3 | WS-MCP 客户端实现 | AI | P0 | 可连接 WebSocket MCP |
| 8.4 | MCP 连接管理 API | AI | P0 | CRUD 操作完整 |
| 8.5 | MCP 管理页面 | AI | P0 | 可添加/编辑/删除/测试连接 |
| 8.6 | 工具选择器组件 | AI | P1 | 可选择启用的工具 |

#### 第9周：SKILL 管理

| 任务ID | 任务 | 类型 | 优先级 | 验收标准 |
|--------|------|------|--------|----------|
| 9.1 | SKILL 表设计 | AI | P0 | 表结构符合设计文档 |
| 9.2 | SKILL CRUD API | AI | P0 | CRUD 操作完整 |
| 9.3 | SKILL 解析器实现 | AI | P0 | 可解析 YAML 定义 |
| 9.4 | SKILL 执行器实现 | AI | P0 | 可执行 SKILL 流程 |
| 9.5 | SKILL 管理页面 | AI | P0 | 可添加/编辑/删除 SKILL |
| 9.6 | SKILL 编辑器组件 | AI | P0 | YAML 编辑器 + 实时预览 |
| 9.7 | SKILL 选择器组件 | AI | P1 | 可选择启用的 SKILL |

#### 第10周：RAG 知识库

| 任务ID | 任务 | 类型 | 优先级 | 验收标准 |
|--------|------|------|--------|----------|
| 10.1 | 知识库表设计 | AI | P0 | 表结构符合设计文档 |
| 10.2 | Milvus 向量存储实现 | AI | P0 | 可存储/检索向量 |
| 10.3 | 文档处理服务（Celery） | AI | P0 | 异步处理文档 |
| 10.4 | 知识库 CRUD API | AI | P0 | CRUD 操作完整 |
| 10.5 | 文档上传 API | AI | P0 | 可上传 PDF/MD/TXT |
| 10.6 | 检索 API | AI | P0 | 语义检索可用 |
| 10.7 | 知识库管理页面 | AI | P0 | 可管理知识库和文档 |
| 10.8 | 知识库选择器组件 | AI | P1 | 可选择启用的知识库 |
| 10.9 | 检索结果展示组件 | AI | P1 | 可展示检索来源 |

#### 第10.5周：自定义 Agent

| 任务ID | 任务 | 类型 | 优先级 | 验收标准 |
|--------|------|------|--------|----------|
| 10.10 | 自定义 Agent 表设计 | AI | P0 | 表结构符合设计文档（custom_agents 及关联表） |
| 10.11 | 自定义 Agent CRUD API | AI | P0 | 可创建/查询/更新/删除自定义 Agent |
| 10.12 | Agent 资源关联 API | AI | P0 | 可关联知识库、MCP、SKILL |
| 10.13 | 系统默认 Agent 初始化 | AI | P0 | 预置 ReAct/RAG/PlanExecute Agent |
| 10.14 | Agent 管理页面 | AI | P0 | 可查看/创建/编辑/删除 Agent |
| 10.15 | Agent 选择器组件 | AI | P0 | 对话界面可选择 Agent |
| 10.16 | Agent 资源自动应用 | AI | P0 | 选择 Agent 后自动勾选预配置资源 |
| 10.17 | Agent 复制功能 | AI | P1 | 可基于默认 Agent 创建自定义版本 |

### 4.3 里程碑

| 里程碑 | 完成标准 | 预计日期 |
|--------|---------|---------|
| M5: 模型对接完成 | 可配置并调用 LLM | 第5周末 |
| M6: Agent 基础可用 | ReAct Agent 可运行 | 第6周末 |
| M7: Agent 完善 | 多 Agent 架构可用 | 第7周末 |
| M8: MCP 可用 | 可连接 MCP Server | 第8周末 |
| M9: SKILL 可用 | 可创建执行 SKILL | 第9周末 |
| M10: RAG 可用 | 可上传文档并检索 | 第10周末 |
| M10.5: 自定义 Agent 可用 | 可创建和使用自定义 Agent | 第10.5周末 |

---

## 5. 阶段三：扩展功能（第11-14周）

### 5.1 目标

实现规则引擎、完善权限系统、优化用户体验。

### 5.2 任务分解

#### 第11周：规则引擎基础

| 任务ID | 任务 | 类型 | 优先级 | 验收标准 |
|--------|------|------|--------|----------|
| 11.1 | 规则表设计 | AI | P0 | 表结构符合设计文档 |
| 11.2 | 规则引擎核心实现 | AI | P0 | 规则匹配逻辑可运行 |
| 11.3 | 条件评估器实现 | AI | P0 | 支持各类条件评估 |
| 11.4 | 动作执行器实现 | AI | P0 | 支持各类动作执行 |
| 11.5 | 规则 CRUD API | AI | P0 | CRUD 操作完整 |
| 11.6 | WS-MCP 事件订阅 | AI | P0 | 可订阅事件触发规则 |

#### 第12周：规则引擎前端

| 任务ID | 任务 | 类型 | 优先级 | 验收标准 |
|--------|------|------|--------|----------|
| 12.1 | 规则管理页面 | AI | P0 | 可查看/启用/禁用规则 |
| 12.2 | 规则编辑器组件 | AI | P0 | 可新建/编辑规则 |
| 12.3 | 条件构建器组件 | AI | P0 | 可视化配置条件 |
| 12.4 | 动作配置器组件 | AI | P0 | 可视化配置动作 |
| 12.5 | 规则测试功能 | AI | P1 | 可测试规则触发 |
| 12.6 | 规则日志展示 | AI | P1 | 可查看规则执行历史 |

#### 第13周：权限系统完善

| 任务ID | 任务 | 类型 | 优先级 | 验收标准 |
|--------|------|------|--------|----------|
| 13.1 | 细粒度权限实现 | AI | P0 | 资源级别权限控制 |
| 13.2 | 资源访问控制 | AI | P0 | 按所有者限制访问 |
| 13.3 | 用户管理 API | AI | P1 | 管理员可管理用户 |
| 13.4 | 角色管理 API | AI | P1 | 可创建自定义角色 |
| 13.5 | 用户管理页面 | AI | P1 | 可查看/编辑用户 |
| 13.6 | 权限配置组件 | AI | P1 | 可配置角色权限 |
| 13.7 | 侧边栏权限过滤 | AI | P0 | 根据权限显示菜单 |

#### 第14周：优化与完善

| 任务ID | 任务 | 类型 | 优先级 | 验收标准 |
|--------|------|------|--------|----------|
| 14.1 | Reflexion Agent 实现 | AI | P2 | 支持自我反思和改进 |
| 14.2 | 系统设置 API | AI | P1 | 可配置系统参数 |
| 14.3 | 操作日志实现 | AI | P1 | 记录关键操作 |
| 14.4 | 系统设置页面 | AI | P1 | 可修改系统配置 |
| 14.5 | 全局加载状态优化 | AI | P1 | 统一的加载体验 |
| 14.6 | 错误处理优化 | AI | P1 | 友好的错误提示 |
| 14.7 | 响应式布局完善 | AI | P1 | 移动端可用 |

### 5.3 里程碑

| 里程碑 | 完成标准 | 预计日期 |
|--------|---------|---------|
| M11: 规则引擎后端完成 | 规则可触发执行 | 第11周末 |
| M12: 规则引擎完成 | 可视化配置规则 | 第12周末 |
| M13: 权限系统完成 | 细粒度权限可用 | 第13周末 |
| M14: 功能完成 | 所有功能开发完成 | 第14周末 |

---

## 6. 阶段四：测试与优化（第15-16周）

### 6.1 目标

完成集成测试、性能测试、安全测试，修复发现的问题。

### 6.2 任务分解

#### 第15周：测试

| 任务ID | 任务 | 类型 | 优先级 | 验收标准 |
|--------|------|------|--------|----------|
| 15.1 | 后端单元测试补充 | AI | P0 | 核心模块覆盖率 > 80% |
| 15.2 | 后端集成测试 | AI | P0 | API 集成测试通过 |
| 15.3 | 前端组件测试 | AI | P0 | 核心组件测试通过 |
| 15.4 | E2E 测试编写 | AI | P0 | 主流程 E2E 测试通过 |
| 15.5 | API 压力测试 | AI | P1 | 性能指标达标 |
| 15.6 | AG-UI SSE 压力测试 | AI | P1 | 并发连接数达标 |

#### 第16周：优化与修复

| 任务ID | 任务 | 类型 | 优先级 | 验收标准 |
|--------|------|------|--------|----------|
| 16.1 | 安全审计 | 人工+AI | P0 | 安全检查通过 |
| 16.2 | 后端性能优化 | AI | P1 | 响应时间达标 |
| 16.3 | 前端性能优化 | AI | P1 | 页面加载速度达标 |
| 16.4 | Bug 修复 | AI | P0 | 无 P0/P1 Bug |
| 16.5 | 代码重构 | AI | P2 | 代码质量检查通过 |
| 16.6 | 文档完善 | AI | P1 | API 文档完整 |

### 6.3 里程碑

| 里程碑 | 完成标准 | 预计日期 |
|--------|---------|---------|
| M15: 测试完成 | 测试覆盖率 > 80% | 第15周末 |
| M16: 优化完成 | 无 P0/P1 Bug | 第16周末 |

---

## 7. 阶段五：部署上线（第17周）

### 7.1 目标

完成生产环境部署，系统正式上线。

### 7.2 任务分解

| 任务ID | 任务 | 类型 | 优先级 | 验收标准 |
|--------|------|------|--------|----------|
| 17.1 | 生产环境配置 | AI | P0 | 环境可访问 |
| 17.2 | Nginx 配置 | AI | P0 | 反向代理正常 |
| 17.3 | SSL 证书配置 | 人工+AI | P0 | HTTPS 可用 |
| 17.4 | 数据库迁移 | AI | P0 | 生产数据库可用 |
| 17.5 | 应用部署 | AI | P0 | 服务正常运行 |
| 17.6 | 监控配置 | AI | P1 | 指标可观测 |
| 17.7 | 日志收集配置 | AI | P1 | 日志可查询 |
| 17.8 | 备份策略配置 | AI | P1 | 备份任务可执行 |
| 17.9 | 上线验证 | 人工 | P0 | 所有功能正常 |
| 17.10 | 用户文档发布 | AI | P1 | 文档可访问 |

### 7.3 里程碑

| 里程碑 | 完成标准 | 预计日期 |
|--------|---------|---------|
| M17: 系统上线 | 生产环境可访问 | 第17周末 |

---

## 8. 风险管理

### 8.1 技术风险

| 风险 | 影响 | 概率 | 缓解措施 |
|------|------|------|---------|
| LLM API 不稳定 | 高 | 中 | 实现重试机制，多模型备份 |
| MCP 协议兼容性问题 | 中 | 中 | 提前验证，预留调试时间 |
| 向量数据库性能问题 | 中 | 低 | 预留备选方案（Qdrant） |
| WebSocket 连接管理复杂 | 中 | 中 | 使用成熟库，充分测试 |

### 8.2 进度风险

| 风险 | 影响 | 概率 | 缓解措施 |
|------|------|------|---------|
| 需求变更 | 高 | 中 | 控制范围，预留缓冲时间 |
| 技术难点攻关超时 | 中 | 中 | 提前识别，并行方案研究 |
| 人员变动 | 高 | 低 | 知识共享，文档完善 |
| 第三方服务问题 | 中 | 低 | 监控预警，备选方案 |

### 8.3 应对策略

1. **每周评审**：每周进行进度评审，及时发现问题
2. **缓冲时间**：每个阶段预留 10% 缓冲时间
3. **优先级调整**：根据实际情况调整任务优先级
4. **技术预研**：关键技术提前验证

---

## 9. AI 开发工作流

### 9.1 角色分配

| 角色 | 职责 |
|------|------|
| 人类开发者 | 需求分析、任务拆分、Prompt 编写、代码审查、集成测试、部署运维 |
| AI 助手 | 代码生成、单元测试、文档编写、Bug 修复、代码重构 |

### 9.2 开发循环

```
循环开始
    │
    ├── 1. 选择任务（参考任务分解表）
    │
    ├── 2. 打开对应 Prompt（参考 AIPrompts.md）
    │
    ├── 3. 与 AI 对话生成代码
    │
    ├── 4. 审查生成的代码
    │       ├── 通过 → 提交代码
    │       └── 需修改 → 继续与 AI 对话
    │
    ├── 5. 运行测试
    │       ├── 通过 → 标记任务完成
    │       └── 失败 → 与 AI 调试修复
    │
    └── 下一个任务
```

### 9.3 工具配置

| 工具 | 用途 |
|------|------|
| GitHub Copilot | 代码补全、实时建议 |
| Claude / GPT-4 | 复杂任务、架构设计、代码审查 |
| Cursor | AI 集成 IDE |
| GitHub Actions | CI/CD 自动化 |
| ESLint / Pylint | 代码质量检查 |

---

## 10. AI 开发质量保证

### 10.1 代码审查清单

> 每次 AI 生成代码后，使用此清单进行审查

- [ ] **功能正确性**：代码实现是否符合任务要求
- [ ] **类型安全**：TypeScript/Python 类型是否完整
- [ ] **错误处理**：异常是否正确捕获和处理
- [ ] **安全性**：是否有 SQL 注入、XSS 等风险
- [ ] **性能**：是否有明显性能问题
- [ ] **可维护性**：代码是否清晰易懂
- [ ] **测试**：是否包含必要的测试

### 10.2 测试策略

| 测试类型 | 谁生成 | 谁执行 | 工具 |
|---------|---------|---------|------|
| 单元测试 | AI | 自动 (CI) | pytest, vitest |
| 集成测试 | AI | 自动 (CI) | pytest + httpx |
| E2E 测试 | AI | 自动 (CI) | Playwright |
| 探索测试 | 人工 | 人工 | 手动 |

### 10.3 质量指标

| 指标 | 目标值 |
|------|--------|
| 代码覆盖率 | > 80% |
| API 响应时间（P95） | < 200ms |
| AG-UI SSE 延迟（P95） | < 100ms |
| 系统可用性 | 99.9% |
| AI 生成代码通过率 | > 90% |

### 10.3 发布流程

```
开发环境 → 测试环境 → 预发布环境 → 生产环境

1. 开发完成，提交 PR
2. Code Review 通过
3. 自动化测试通过
4. 合并到 develop 分支
5. 部署到测试环境
6. 测试通过，合并到 main 分支
7. 部署到预发布环境
8. 验收通过，发布到生产环境
```

---

## 11. 文档清单

### 11.1 设计文档

| 文档 | 状态 | 位置 |
|------|------|------|
| 产品需求文档 | ✅ 完成 | docs/ProductRequirements.md |
| 系统架构设计 | ✅ 完成 | docs/SystemArchitecture.md |
| 后端模块设计 | ✅ 完成 | docs/BackendDesign.md |
| 前端界面设计 | ✅ 完成 | docs/FrontendDesign.md |
| 数据库设计 | ✅ 完成 | docs/DatabaseDesign.md |
| API 接口设计 | ✅ 完成 | docs/APIDesign.md |
| 开发计划 | ✅ 完成 | docs/DevelopmentPlan.md |
| WS-MCP 协议 | ✅ 完成 | docs/CustomizeWsMessageProcotol.md |

### 11.2 开发文档（待创建）

| 文档 | 说明 |
|------|------|
| 开发环境搭建指南 | 本地开发环境配置 |
| 编码规范 | 代码风格和规范 |
| Git 工作流 | 分支管理和提交规范 |
| 测试指南 | 测试编写和运行 |
| 部署指南 | 部署流程和配置 |

### 11.3 用户文档（待创建）

| 文档 | 说明 |
|------|------|
| 用户手册 | 功能使用说明 |
| API 文档 | OpenAPI 文档 |
| FAQ | 常见问题解答 |

---

## 12. 附录

### 12.1 技术选型依据

| 技术 | 选型理由 |
|------|---------|
| FastAPI | 高性能、异步支持、自动文档生成 |
| Vue 3 | 组合式 API、更好的 TypeScript 支持 |
| PostgreSQL | 功能丰富、JSONB 支持、社区活跃 |
| Redis | 高性能缓存、消息队列支持 |
| Milvus | 开源向量数据库、性能优秀 |
| Celery | 成熟的异步任务框架 |

### 12.2 参考资源

- [FastAPI 官方文档](https://fastapi.tiangolo.com/)
- [Vue 3 官方文档](https://vuejs.org/)
- [MCP 协议规范](https://spec.modelcontextprotocol.io/)
- [Milvus 文档](https://milvus.io/docs)

### 12.3 相关文档

- [产品需求文档](./ProductRequirements.md)
- [系统架构设计](./SystemArchitecture.md)
- [后端模块设计](./BackendDesign.md)
- [前端界面设计](./FrontendDesign.md)
- [数据库设计](./DatabaseDesign.md)
- [API 接口设计](./APIDesign.md)
